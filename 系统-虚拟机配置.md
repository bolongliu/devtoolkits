# mac开发环境配置



# 虚拟机配置 

## [最新] Mac + VMware 安装 Ubuntu 虚拟机，100%成功、保姆级教程！Intel/M芯片 + sever版/桌面版

1. 软件/镜像下载
```txt
VMware-Fusion-13.6.2: https://pan.quark.cn/s/0e6f0cbc8e44
VMware-Fusion-13.6.1: https://pan.quark.cn/s/dd6e1a82a561
VMware-Fusion-13.6.0: https://pan.quark.cn/s/418ff918c58a
VMware-Fusion-13.5.2: https://pan.quark.cn/s/39bb114e3214

VMware：https://blogs.vmware.com/teamfusion/2...
Ubuntu：https://ubuntu.com/download/server
```

2. Ubuntu命令：
```bash
查看内核信息：uname -a
安装网络工具包：apt install net-tools
查看IP：ifconfig
ssh命令：ssh 用户名@IP地址
查看系统版本：lsb-release -a
```

3. 安装桌面
apt更换清华源：
```bash
sudo sed -i "s@http://.*archive.ubuntu.com@https://mirrors.tuna.tsinghua.edu.cn@g" /etc/apt/sources.list
sudo sed -i "s@http://.*security.ubuntu.com@https://mirrors.tuna.tsinghua.edu.cn@g" /etc/apt/sources.list
```

执行更新
sudo apt update
sudo apt upgrade

报错：dpkg was interrupted, you must manually run 'dpkg --configure -a' to correct the problem.
执行：dpkg --configure -a 
然后重新执行：sudo apt upgrade

安装Ubuntu desktop：sudo apt install ubuntu-desktop
启用图形界面：sudo systemctl set-default graphical.target
重启系统：sudo reboot

4.基本配置
关闭 sudo 密码
为了避免每次使用 sudo 命令时都输入密码，我们可以将密码关闭。操作方法：

终端输入命令sudo visudo，打开 visudo；
找到 %sudo ALL=(ALL:ALL) ALL 这一行修改为%sudo ALL=(ALL:ALL) NOPASSWD:ALL
sudo vim /etc/sudoers
%sudo ALL=(ALL:ALL) NOPASSWD:ALL

修改镜像源为 ubuntu arm 源：
编辑源文件，将 mirrors.aliyun.com/ubuntu 替换为 ARM 专用地址：
```bash
sudo sed -i 's|mirrors.aliyun.com/ubuntu|mirrors.aliyun.com/ubuntu-ports|g' /etc/apt/sources.list
```
💡 ARM 架构必须使用 -ports 后缀源，否则会触发 404 错误
```bash
sudo apt clean  # 清除错误缓存
sudo apt update
```

## 开机时间过长问题


<img width="706" height="68" alt="image" src="https://github.com/user-attachments/assets/d28431b7-f159-43f8-8a34-c5f2d10ffffd" />

是一个非常典型的 systemd 网络等待超时问题。

问题核心分析

系统启动时，systemd-networkd-wait-online.service 这个服务的任务是等待所有网络接口完成配置并真正连接到网络。当它无法在预期时间内检测到网络就绪时，就会一直等待，从而导致系统启动过程或依赖网络的服务（比如 Docker）被卡住。

绿色的 [ OK ] 表示其他服务（如 Docker）已准备就绪，只是在等待这个网络条件。红色的 [ *** ] 和 (1min 55s / no limit) 明确指出了卡住的服务和等待时间。

解决方案（从易到难）

您可以根据您的实际情况，选择以下一种或多种方法来解决。

方法一：检查并修复根本的网络连接问题（推荐首选）

这通常是问题的根源，尤其是在物理机或新装系统上。

1.  检查物理连接：确保网线已插稳，或Wi-Fi已正确连接。
2.  检查网络接口状态：
    ip a
    
    查看您的网络接口（如 eth0, ens33, wlan0）是否处于 UP 状态并且分配到了有效的IP地址（inet 字段）。如果看不到IP地址，说明DHCP获取IP失败或配置有误。
3.  检查网络配置：根据您的系统，检查网络配置文件。
    ◦ 使用 netplan（Ubuntu 常见）：

      配置文件通常在 /etc/netplan/ 目录下。检查后应用配置：
      sudo nano /etc/netplan/01-netcfg.yaml  # 文件名可能不同
      sudo netplan apply
      
    ◦ 使用 NetworkManager：

      使用 nmtui 或 nmcli 命令检查连接配置。

方法二：调整等待服务的超时时间（治标，但快速有效）

如果网络本身没问题，或者您不希望系统在启动时花太多时间等待网络，可以修改这个服务的超时设置。

1.  创建或编辑该服务的覆盖配置文件：
    sudo systemctl edit systemd-networkd-wait-online.service
    
2.  在打开的编辑器中，输入以下内容，将超时时间设置为一个合理的值（例如30秒）：
    [Service]
    TimeoutStartSec=30s
    
3.  保存并退出编辑器。
4.  重新加载 systemd 配置并重启该服务：
    sudo systemctl daemon-reload
    sudo systemctl restart systemd-networkd-wait-online.service
    

方法三：直接禁用等待服务（最快速，但有风险）

注意： 如果您确定某些服务（如Docker）不需要等待网络完全就绪就能启动，或者您的系统不依赖网络（如某些离线环境），可以考虑禁用此服务。但这不是推荐的首选方法，可能会导致依赖网络的服务在启动时出错。
sudo systemctl disable systemd-networkd-wait-online.service


下次启动时，系统将不再等待此服务。

总结与建议

方案 优点 缺点 适用场景

方法一：修复网络 从根本上解决问题，一劳永逸 可能需要一些网络知识 网络配置确实有问题时

方法二：设置超时 快速有效，平衡了等待和启动速度 未解决根本网络问题 网络慢或波动，想快速进入系统

方法三：禁用服务 最快，启动不再卡顿 有风险，可能影响依赖网络的服务 开发测试环境、确定不需要等待网络时

操作建议：
1.  首先尝试 方法一，运行 ip a 命令，检查您的网络接口和IP地址状态。
2.  如果网络状态看起来正常，但就是想加快启动速度，建议使用 方法二 设置一个超时时间。
3.  只有在明确知道后果的情况下，才考虑 方法三。

希望这能帮您解决问题！
